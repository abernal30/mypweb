<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Data collection | Machine learning introductory guide in R. v.1.2</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Data collection | Machine learning introductory guide in R. v.1.2" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Data collection | Machine learning introductory guide in R. v.1.2" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Arturo Bernal" />


<meta name="date" content="2022-03-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="big-picture.html"/>
<link rel="next" href="discover-and-visualize-the-data-to-gain-insights.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="big-picture.html"><a href="big-picture.html"><i class="fa fa-check"></i><b>1</b> Big picture<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="big-picture.html"><a href="big-picture.html#frame-the-problem"><i class="fa fa-check"></i><b>1.1</b> Frame the Problem<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="big-picture.html"><a href="big-picture.html#select-a-performance-measure"><i class="fa fa-check"></i><b>1.2</b> Select a Performance Measure<span></span></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="big-picture.html"><a href="big-picture.html#for-continuous-variables"><i class="fa fa-check"></i><b>1.2.1</b> For continuous variables<span></span></a></li>
<li class="chapter" data-level="1.2.2" data-path="big-picture.html"><a href="big-picture.html#for-categorical-variables-classification-methods"><i class="fa fa-check"></i><b>1.2.2</b> For categorical variables (classification methods)<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-collection.html"><a href="data-collection.html"><i class="fa fa-check"></i><b>2</b> Data collection<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-collection.html"><a href="data-collection.html#take-a-quick-look-at-the-data-structure"><i class="fa fa-check"></i><b>2.1</b> Take a Quick Look at the Data Structure<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="data-collection.html"><a href="data-collection.html#create-the-training-and-test-set"><i class="fa fa-check"></i><b>2.2</b> Create the training and Test Set<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-collection.html"><a href="data-collection.html#for-cros-sectional-data-or-no-time-series"><i class="fa fa-check"></i><b>2.2.1</b> For cros sectional data or no time series<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="data-collection.html"><a href="data-collection.html#for-time-series"><i class="fa fa-check"></i><b>2.2.2</b> For time series<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="discover-and-visualize-the-data-to-gain-insights.html"><a href="discover-and-visualize-the-data-to-gain-insights.html"><i class="fa fa-check"></i><b>3</b> 3 Discover and Visualize the Data to Gain Insights<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="discover-and-visualize-the-data-to-gain-insights.html"><a href="discover-and-visualize-the-data-to-gain-insights.html#looking-for-relationships-among-features-and-correlations"><i class="fa fa-check"></i><b>3.1</b> Looking for relationships among features and Correlations<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="discover-and-visualize-the-data-to-gain-insights.html"><a href="discover-and-visualize-the-data-to-gain-insights.html#experimenting-with-attribute-combinations"><i class="fa fa-check"></i><b>3.2</b> Experimenting with Attribute Combinations<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="prepare-the-data-for-machine-learning-algorithms.html"><a href="prepare-the-data-for-machine-learning-algorithms.html"><i class="fa fa-check"></i><b>4</b> 4 Prepare the Data for Machine Learning Algorithms<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="prepare-the-data-for-machine-learning-algorithms.html"><a href="prepare-the-data-for-machine-learning-algorithms.html#data-cleaning"><i class="fa fa-check"></i><b>4.1</b> Data Cleaning<span></span></a></li>
<li class="chapter" data-level="4.2" data-path="prepare-the-data-for-machine-learning-algorithms.html"><a href="prepare-the-data-for-machine-learning-algorithms.html#missing-values"><i class="fa fa-check"></i><b>4.2</b> Missing values<span></span></a></li>
<li class="chapter" data-level="4.3" data-path="prepare-the-data-for-machine-learning-algorithms.html"><a href="prepare-the-data-for-machine-learning-algorithms.html#handling-text-and-categorical-attributes"><i class="fa fa-check"></i><b>4.3</b> Handling Text and Categorical Attributes<span></span></a></li>
<li class="chapter" data-level="4.4" data-path="prepare-the-data-for-machine-learning-algorithms.html"><a href="prepare-the-data-for-machine-learning-algorithms.html#feature-scaling"><i class="fa fa-check"></i><b>4.4</b> Feature Scaling<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="select-and-train-and-evaluate-the-model.html"><a href="select-and-train-and-evaluate-the-model.html"><i class="fa fa-check"></i><b>5</b> 5 Select and Train and evaluate the Model<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="select-and-train-and-evaluate-the-model.html"><a href="select-and-train-and-evaluate-the-model.html#for-continuous-variables-1"><i class="fa fa-check"></i><b>5.1</b> For continuous variables<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="select-and-train-and-evaluate-the-model.html"><a href="select-and-train-and-evaluate-the-model.html#select-the-model-for-categorical-variables"><i class="fa fa-check"></i><b>5.2</b> Select the model for categorical variables<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="select-and-train-and-evaluate-the-model.html"><a href="select-and-train-and-evaluate-the-model.html#clasification-models"><i class="fa fa-check"></i><b>5.2.1</b> Clasification models<span></span></a></li>
<li class="chapter" data-level="5.2.2" data-path="select-and-train-and-evaluate-the-model.html"><a href="select-and-train-and-evaluate-the-model.html#training-and-evaluating-on-the-training-set"><i class="fa fa-check"></i><b>5.2.2</b> Training and Evaluating on the Training Set<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="select-and-train-and-evaluate-the-model.html"><a href="select-and-train-and-evaluate-the-model.html#resampling-cross-validation"><i class="fa fa-check"></i><b>5.3</b> Resampling (cross-validation)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="fine-tune-or-tune-the-ml-model.html"><a href="fine-tune-or-tune-the-ml-model.html"><i class="fa fa-check"></i><b>6</b> 6 Fine-Tune or Tune the ML Model<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="fine-tune-or-tune-the-ml-model.html"><a href="fine-tune-or-tune-the-ml-model.html#analyze-the-best-models-and-their-errors"><i class="fa fa-check"></i><b>6.1</b> Analyze the Best Models and Their Errors<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="fine-tune-or-tune-the-ml-model.html"><a href="fine-tune-or-tune-the-ml-model.html#evaluate-your-system-on-the-test-set"><i class="fa fa-check"></i><b>6.2</b> Evaluate Your System on the Test Set<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>7</b> References<span></span></a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Machine learning introductory guide in R. v.1.2</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-collection" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Data collection<a href="data-collection.html#data-collection" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The data sets we use for this text are stored in Github. The house pricing data set is retrived from:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-collection.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb1-2"><a href="data-collection.html#cb1-2" aria-hidden="true" tabindex="-1"></a>house<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/abernal30/ml_book/main/housing.csv&quot;</span>)</span></code></pre></div>
<p>The credit data set is retrieve from:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-collection.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb2-2"><a href="data-collection.html#cb2-2" aria-hidden="true" tabindex="-1"></a>credit<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/abernal30/ml_book/main/credit.csv&quot;</span>)</span></code></pre></div>
<p>And for the Bit-coin:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-collection.html#cb3-1" aria-hidden="true" tabindex="-1"></a>bit<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/abernal30/ml_book/main/bit.csv&quot;</span>)</span></code></pre></div>
<div id="take-a-quick-look-at-the-data-structure" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Take a Quick Look at the Data Structure<a href="data-collection.html#take-a-quick-look-at-the-data-structure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To review the data class</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-collection.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(house)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    20640 obs. of  10 variables:
##  $ median_house_value: int  452600 358500 352100 341300 342200 269700 299200 241400 226700 261100 ...
##  $ longitude         : num  -122 -122 -122 -122 -122 ...
##  $ latitude          : num  37.9 37.9 37.9 37.9 37.9 ...
##  $ housing_median_age: int  41 21 52 52 52 52 52 52 42 52 ...
##  $ total_rooms       : int  880 7099 1467 1274 1627 919 2535 3104 2555 3549 ...
##  $ total_bedrooms    : int  129 1106 190 235 280 213 489 687 665 707 ...
##  $ population        : int  322 2401 496 558 565 413 1094 1157 1206 1551 ...
##  $ households        : int  126 1138 177 219 259 193 514 647 595 714 ...
##  $ median_income     : num  8.33 8.3 7.26 5.64 3.85 ...
##  $ ocean_proximity   : chr  &quot;NEAR BAY&quot; &quot;NEAR BAY&quot; &quot;NEAR BAY&quot; &quot;NEAR BAY&quot; ...</code></pre>
<p>To review outliers or Nas.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-collection.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(house)</span></code></pre></div>
<pre><code>##  median_house_value   longitude         latitude     housing_median_age
##  Min.   : 14999     Min.   :-124.3   Min.   :32.54   Min.   : 1.00     
##  1st Qu.:119600     1st Qu.:-121.8   1st Qu.:33.93   1st Qu.:18.00     
##  Median :179700     Median :-118.5   Median :34.26   Median :29.00     
##  Mean   :206856     Mean   :-119.6   Mean   :35.63   Mean   :28.64     
##  3rd Qu.:264725     3rd Qu.:-118.0   3rd Qu.:37.71   3rd Qu.:37.00     
##  Max.   :500001     Max.   :-114.3   Max.   :41.95   Max.   :52.00     
##                                                                        
##   total_rooms    total_bedrooms     population      households    
##  Min.   :    2   Min.   :   1.0   Min.   :    3   Min.   :   1.0  
##  1st Qu.: 1448   1st Qu.: 296.0   1st Qu.:  787   1st Qu.: 280.0  
##  Median : 2127   Median : 435.0   Median : 1166   Median : 409.0  
##  Mean   : 2636   Mean   : 537.9   Mean   : 1425   Mean   : 499.5  
##  3rd Qu.: 3148   3rd Qu.: 647.0   3rd Qu.: 1725   3rd Qu.: 605.0  
##  Max.   :39320   Max.   :6445.0   Max.   :35682   Max.   :6082.0  
##                  NA&#39;s   :207                                      
##  median_income     ocean_proximity   
##  Min.   : 0.4999   Length:20640      
##  1st Qu.: 2.5634   Class :character  
##  Median : 3.5348   Mode  :character  
##  Mean   : 3.8707                     
##  3rd Qu.: 4.7432                     
##  Max.   :15.0001                     
## </code></pre>
</div>
<div id="create-the-training-and-test-set" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Create the training and Test Set<a href="data-collection.html#create-the-training-and-test-set" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It is not a wise machine learning practice to train your model and score its accuracy on the same data set. It is a far superior technique to test your model with varying model parameter values on an unseen test set.</p>
<p>Is a common practice to divide your data set into two parts training and test. However, other authors sucha as Lantz (2015) suggest to spit into Training Set, Validation Set and a Test Set. in the latter case, the proposal is that to train the model on the training set (60% of the data), then perform model selection (tuning parameters) on validation set (20% of the data) and once you are ready, test your model on the test set (20% of the data).
The set. seed function helps to get the same aleatory partition in the data.</p>
<div id="for-cros-sectional-data-or-no-time-series" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> For cros sectional data or no time series<a href="data-collection.html#for-cros-sectional-data-or-no-time-series" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For the case where time is not relevant, the partition is usually random 80% the training set and 20% the test set.</p>
<p>For the housing prices data set:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-collection.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span> (<span class="dv">42</span>)</span>
<span id="cb8-2"><a href="data-collection.html#cb8-2" aria-hidden="true" tabindex="-1"></a>dim<span class="ot">&lt;-</span><span class="fu">dim</span>(house)</span>
<span id="cb8-3"><a href="data-collection.html#cb8-3" aria-hidden="true" tabindex="-1"></a>train_sample<span class="ot">&lt;-</span><span class="fu">sample</span>(dim[<span class="dv">1</span>],dim[<span class="dv">1</span>]<span class="sc">*</span>.<span class="dv">8</span>)</span>
<span id="cb8-4"><a href="data-collection.html#cb8-4" aria-hidden="true" tabindex="-1"></a>house_train <span class="ot">&lt;-</span> house[train_sample, ]</span>
<span id="cb8-5"><a href="data-collection.html#cb8-5" aria-hidden="true" tabindex="-1"></a>house_test  <span class="ot">&lt;-</span> house[<span class="sc">-</span>train_sample, ]</span></code></pre></div>
<p>For the credit data set</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-collection.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span> (<span class="dv">43</span>)</span>
<span id="cb9-2"><a href="data-collection.html#cb9-2" aria-hidden="true" tabindex="-1"></a>dim<span class="ot">&lt;-</span><span class="fu">dim</span>(credit)</span>
<span id="cb9-3"><a href="data-collection.html#cb9-3" aria-hidden="true" tabindex="-1"></a>train_sample<span class="ot">&lt;-</span><span class="fu">sample</span>(dim[<span class="dv">1</span>],dim[<span class="dv">1</span>]<span class="sc">*</span>.<span class="dv">8</span>)</span>
<span id="cb9-4"><a href="data-collection.html#cb9-4" aria-hidden="true" tabindex="-1"></a>credit_train <span class="ot">&lt;-</span> credit[train_sample, ]</span>
<span id="cb9-5"><a href="data-collection.html#cb9-5" aria-hidden="true" tabindex="-1"></a>credit_test  <span class="ot">&lt;-</span> credit[<span class="sc">-</span>train_sample, ]</span></code></pre></div>
</div>
<div id="for-time-series" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> For time series<a href="data-collection.html#for-time-series" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For time series, usually we are interested in predicting the future, then is not convenient to split the training-test as we did in the last section. For time series the partition is in periods of time. The training is a period preceding the test. For this example we use the Bit Coin data series, in which case we also add some independent variables. For this case, assume that we want to predict a variable Direction, which is a categorical variable, which takes the value of one when the current price is bigger than the close price ten days ago, and zero otherwise.</p>
<p><span class="math display">\[Direction (t)=\alpha\ +\beta1 x1+\beta2 x2 + ..+e \]</span></p>
<p>In this case, before make the training-test partition, I suggest to transform the data frame into a xts object, which allow to make date subsets.</p>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-collection.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(xts)</span></span>
<span id="cb13-2"><a href="data-collection.html#cb13-2" aria-hidden="true" tabindex="-1"></a>datedata<span class="ot">&lt;-</span>bit[,<span class="st">&quot;Date&quot;</span>]</span>
<span id="cb13-3"><a href="data-collection.html#cb13-3" aria-hidden="true" tabindex="-1"></a>datedata<span class="ot">&lt;-</span><span class="fu">as.Date</span>(datedata,<span class="at">format=</span><span class="st">&quot;%m/%d/%Y&quot;</span>)</span>
<span id="cb13-4"><a href="data-collection.html#cb13-4" aria-hidden="true" tabindex="-1"></a>datax<span class="ot">&lt;-</span><span class="fu">xts</span>(bit,<span class="at">order.by =</span> <span class="fu">as.Date</span>(datedata),<span class="fu">as.POSIXct</span>(<span class="st">&quot;%d/%m/%Y&quot;</span>))</span>
<span id="cb13-5"><a href="data-collection.html#cb13-5" aria-hidden="true" tabindex="-1"></a>datax<span class="ot">&lt;-</span>datax[,<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb13-6"><a href="data-collection.html#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datax)</span></code></pre></div>
<pre><code>##            Direction SMA         SMA.1        Bit.3          macd           
## 2015-11-20 &quot;0&quot;       &quot;  322.022&quot; &quot;  324.0855&quot; &quot;2.918218e+00&quot; &quot; -1.632425443&quot;
## 2015-11-21 &quot;1&quot;       &quot;  326.927&quot; &quot;  324.4745&quot; &quot;3.468358e+00&quot; &quot; -0.900212731&quot;
## 2015-11-22 &quot;0&quot;       &quot;  324.536&quot; &quot;  325.7315&quot; &quot;1.690686e+00&quot; &quot;  0.253303853&quot;
## 2015-11-23 &quot;0&quot;       &quot;  323.046&quot; &quot;  323.7910&quot; &quot;1.053604e+00&quot; &quot; -0.105435504&quot;
## 2015-11-24 &quot;0&quot;       &quot;  320.046&quot; &quot;  321.5460&quot; &quot;2.121320e+00&quot; &quot; -0.646634021&quot;
## 2015-11-25 &quot;1&quot;       &quot;  328.206&quot; &quot;  324.1260&quot; &quot;5.769994e+00&quot; &quot;  0.051702842&quot;
##            signal          rsi           
## 2015-11-20 &quot; -1.008662580&quot; &quot;  0.00000000&quot;
## 2015-11-21 &quot; -1.266319087&quot; &quot; 54.30699991&quot;
## 2015-11-22 &quot; -0.323454439&quot; &quot; 67.22869686&quot;
## 2015-11-23 &quot;  0.073934174&quot; &quot;  0.00000000&quot;
## 2015-11-24 &quot; -0.376034762&quot; &quot;  0.00000000&quot;
## 2015-11-25 &quot; -0.297465589&quot; &quot; 73.11828920&quot;</code></pre>
<p>Finally, we apply the subset function.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-collection.html#cb15-1" aria-hidden="true" tabindex="-1"></a>bit_train<span class="ot">&lt;-</span><span class="fu">subset</span>(datax,</span>
<span id="cb15-2"><a href="data-collection.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+</span><span class="fu">index</span>(datax)<span class="sc">&gt;=</span><span class="st">&quot;2019-11-01&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb15-3"><a href="data-collection.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+</span><span class="fu">index</span>(datax)<span class="sc">&lt;=</span><span class="st">&quot;2021-10-01&quot;</span>) </span>
<span id="cb15-4"><a href="data-collection.html#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="data-collection.html#cb15-5" aria-hidden="true" tabindex="-1"></a>bit_test<span class="ot">&lt;-</span><span class="fu">subset</span>(datax,</span>
<span id="cb15-6"><a href="data-collection.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+</span><span class="fu">index</span>(datax)<span class="sc">&gt;=</span><span class="st">&quot;2021-10-02&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb15-7"><a href="data-collection.html#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+</span><span class="fu">index</span>(datax)<span class="sc">&lt;=</span><span class="st">&quot;2021-11-01&quot;</span>) </span></code></pre></div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="big-picture.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="discover-and-visualize-the-data-to-gain-insights.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": false,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
